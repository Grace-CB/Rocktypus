@experiments
Feature: Cytobank Experiments

  @u937
  Scenario: Run The u937 Experiment                                              # features/cytobank/experiment.feature:5
    Given I have configuration data for the requested server                     # features/support/step_definitions/cytobank_steps.rb:3
    And I have the experiment data for 'u937'                                    # features/support/step_definitions/experiment_steps/login.rb:1
    And I start the test framework                                               # features/support/step_definitions/cytobank_steps.rb:8
    When I select my login server                                                # features/support/step_definitions/cytobank_steps.rb:26
    And I log in                                                                 # features/support/step_definitions/cytobank_steps.rb:30
    Then I am on the experiments page                                            # features/support/step_definitions/experiment_steps/login.rb:45
    Given I have enough credits                                                  # features/support/step_definitions/experiment_steps/check_credits.rb:1
    And I open the experiment                                                    # features/support/step_definitions/experiment_steps/open_experiment.rb:1
    When I clone the experiment                                                  # features/support/step_definitions/experiment_steps/open_experiment.rb:9
    Then I am certain that the experiment got cloned                             # features/support/step_definitions/experiment_steps/open_experiment.rb:13
    Given I open the edit experiment form                                        # features/support/step_definitions/experiment_steps/open_experiment.rb:38
    When I change the experiment name to start with "u937"                       # features/support/step_definitions/experiment_steps/open_experiment.rb:42
    Then The experiment name begins with "u937"                                  # features/support/step_definitions/experiment_steps/open_experiment.rb:47
    Given I go to the working illustration                                       # features/support/step_definitions/experiment_steps.rb:3
    When I open the plot statistics pane                                         # features/support/step_definitions/experiment_steps/annotate_channels.rb:1
    And I open the file categorization page                                      # features/support/step_definitions/experiment_steps/annotate_channels.rb:5
    Then I should have the right FCS file names                                  # features/support/step_definitions/experiment_steps/annotate_channels.rb:9
    And I should have the right panel assignments                                # features/support/step_definitions/experiment_steps/annotate_channels.rb:28
    Given I go to the working illustration                                       # features/support/step_definitions/experiment_steps.rb:3
    And I enable the conditions dimension                                        # features/support/step_definitions/experiment_steps/annotate_conditions.rb:1
    And I go to the conditions setup page                                        # features/support/step_definitions/experiment_steps/annotate_conditions.rb:8
    When I add the conditions                                                    # features/support/step_definitions/experiment_steps/annotate_conditions.rb:12
    Then I am sure that the list of conditions is correct                        # features/support/step_definitions/experiment_steps/annotate_conditions.rb:19
    Given I select the 'All Conditions' tab                                      # features/support/step_definitions/experiment_steps/annotate_conditions.rb:30
    When I rename the condition 'IFNg' to 'IFN-g'                                # features/support/step_definitions/experiment_steps/annotate_conditions.rb:24
    Then I am sure that each list of conditions is correct                       # features/support/step_definitions/experiment_steps/annotate_conditions.rb:19
    And I am sure that the files are initially assigned correctly                # features/support/step_definitions/experiment_steps/annotate_conditions.rb:34
    Given I select the 'All Conditions' tab                                      # features/support/step_definitions/experiment_steps/annotate_conditions.rb:30
    When I move file '2-5) U937 IL-4 + IFN-g' to condition 'IL-4 + IFNg'         # features/support/step_definitions/experiment_steps/annotate_conditions.rb:45
    And I move file '2-4) U937 IFN-g' to condition 'IFN-g'                       # features/support/step_definitions/experiment_steps/annotate_conditions.rb:45
    Then I am sure that each list of conditions is correct                       # features/support/step_definitions/experiment_steps/annotate_conditions.rb:19
    And I am sure that the files are posteriorly assigned correctly              # features/support/step_definitions/experiment_steps/annotate_conditions.rb:34
      expected: {"unstim"=>[{:filename=>"20071001-u937.001", :sample_name=>"1-2) U937 Unstim"}, {:filename=>"20071001-u937.008", :sample_name=>"2-2) U937 Unstim"}], "IL-4"=>[{:filename=>"20071001-u937.002", :sample_name=>"1-3) U937 IL-4"}, {:filename=>"20071001-u937.009", :sample_name=>"2-3) U937 IL-4"}], "IFN-g"=>[{:filename=>"20071001-u937.003", :sample_name=>"1-4) U937 IFNg"}, {:filename=>"20071001-u937.010", :sample_name=>"2-4) U937 IFN-g"}], "IL-4 + IFNg"=>[{:filename=>"20071001-u937.004", :sample_name=>"1-6) U937 IL-4 + IFNg"}, {:filename=>"20071001-u937.011", :sample_name=>"2-5) U937 IL-4 + IFN-g"}], "G-CSF"=>[{:filename=>"20071001-u937.005", :sample_name=>"1-7) U937 G-CSF"}, {:filename=>"20071001-u937.012", :sample_name=>"2-6) U937 G-CSF"}], "IFN Type I"=>[{:filename=>"20071001-u937.006", :sample_name=>"1-8) U937 IFN Type I"}, {:filename=>"20071001-u937.013", :sample_name=>"2-7) U937 IFN Type I"}], "IL-6"=>[{:filename=>"20071001-u937.007", :sample_name=>"1-9) U937 IL-6"}, {:filename=>"20071001-u937.014", :sample_name=>"2-8) U937 IL-6"}], "Unassigned"=>[{:filename=>"20071001-u937.015", :sample_name=>"0) U937 Unstained"}]}
           got: {"unstim"=>[{:filename=>"20071001-u937.001", :sample_name=>"1-2) U937 Unstim"}, {:filename=>"20071001-u937.008", :sample_name=>"2-2) U937 Unstim"}], "IL-4"=>[{:filename=>"20071001-u937.002", :sample_name=>"1-3) U937 IL-4"}, {:filename=>"20071001-u937.009", :sample_name=>"2-3) U937 IL-4"}, {:filename=>"20071001-u937.011", :sample_name=>"2-5) U937 IL-4 + IFN-g"}], "IFN-g"=>[{:filename=>"20071001-u937.003", :sample_name=>"1-4) U937 IFNg"}], "IL-4 + IFNg"=>[{:filename=>"20071001-u937.004", :sample_name=>"1-6) U937 IL-4 + IFNg"}], "G-CSF"=>[{:filename=>"20071001-u937.005", :sample_name=>"1-7) U937 G-CSF"}, {:filename=>"20071001-u937.012", :sample_name=>"2-6) U937 G-CSF"}], "IFN Type I"=>[{:filename=>"20071001-u937.006", :sample_name=>"1-8) U937 IFN Type I"}, {:filename=>"20071001-u937.013", :sample_name=>"2-7) U937 IFN Type I"}], "IL-6"=>[{:filename=>"20071001-u937.007", :sample_name=>"1-9) U937 IL-6"}, {:filename=>"20071001-u937.014", :sample_name=>"2-8) U937 IL-6"}], "Unassigned"=>[{:filename=>"20071001-u937.010", :sample_name=>"2-4) U937 IFN-g"}, {:filename=>"20071001-u937.015", :sample_name=>"0) U937 Unstained"}]} (using ==)
      Diff:
      
      @@ -1,9 +1,9 @@
       "G-CSF" => [{:filename=>"20071001-u937.005", :sample_name=>"1-7) U937 G-CSF"}, {:filename=>"20071001-u937.012", :sample_name=>"2-6) U937 G-CSF"}],
       "IFN Type I" => [{:filename=>"20071001-u937.006", :sample_name=>"1-8) U937 IFN Type I"}, {:filename=>"20071001-u937.013", :sample_name=>"2-7) U937 IFN Type I"}],
      -"IFN-g" => [{:filename=>"20071001-u937.003", :sample_name=>"1-4) U937 IFNg"}, {:filename=>"20071001-u937.010", :sample_name=>"2-4) U937 IFN-g"}],
      -"IL-4" => [{:filename=>"20071001-u937.002", :sample_name=>"1-3) U937 IL-4"}, {:filename=>"20071001-u937.009", :sample_name=>"2-3) U937 IL-4"}],
      -"IL-4 + IFNg" => [{:filename=>"20071001-u937.004", :sample_name=>"1-6) U937 IL-4 + IFNg"}, {:filename=>"20071001-u937.011", :sample_name=>"2-5) U937 IL-4 + IFN-g"}],
      +"IFN-g" => [{:filename=>"20071001-u937.003", :sample_name=>"1-4) U937 IFNg"}],
      +"IL-4" => [{:filename=>"20071001-u937.002", :sample_name=>"1-3) U937 IL-4"}, {:filename=>"20071001-u937.009", :sample_name=>"2-3) U937 IL-4"}, {:filename=>"20071001-u937.011", :sample_name=>"2-5) U937 IL-4 + IFN-g"}],
      +"IL-4 + IFNg" => [{:filename=>"20071001-u937.004", :sample_name=>"1-6) U937 IL-4 + IFNg"}],
       "IL-6" => [{:filename=>"20071001-u937.007", :sample_name=>"1-9) U937 IL-6"}, {:filename=>"20071001-u937.014", :sample_name=>"2-8) U937 IL-6"}],
      -"Unassigned" => [{:filename=>"20071001-u937.015", :sample_name=>"0) U937 Unstained"}],
      +"Unassigned" => [{:filename=>"20071001-u937.010", :sample_name=>"2-4) U937 IFN-g"}, {:filename=>"20071001-u937.015", :sample_name=>"0) U937 Unstained"}],
       "unstim" => [{:filename=>"20071001-u937.001", :sample_name=>"1-2) U937 Unstim"}, {:filename=>"20071001-u937.008", :sample_name=>"2-2) U937 Unstim"}],
       (RSpec::Expectations::ExpectationNotMetError)
      ./features/support/step_definitions/experiment_steps/annotate_conditions.rb:42:in `/^I am sure that the files are (initially|posteriorly) assigned correctly$/'
      features/cytobank/experiment.feature:47:in `And I am sure that the files are posteriorly assigned correctly'
    Given I go to the working illustration                                       # features/support/step_definitions/experiment_steps.rb:3
    When I move the dimension 'Conditions' after 'Channels'                      # features/support/step_definitions/experiment_steps/experiment_config.rb:1
    And I save the working illustration                                          # features/support/step_definitions/experiment_steps/experiment_config.rb:5
    Then I am sure that the selection of 'Channels' is initially correct         # features/support/step_definitions/experiment_steps/experiment_config.rb:32
    And I am sure that the selection of 'Conditions' is initially correct        # features/support/step_definitions/experiment_steps/experiment_config.rb:32
    And I am sure that the selection of 'Populations' is initially correct       # features/support/step_definitions/experiment_steps/experiment_config.rb:32
    Given I go to the working illustration                                       # features/support/step_definitions/experiment_steps.rb:3
    When I update the selection of 'Channels'                                    # features/support/step_definitions/experiment_steps/experiment_config.rb:11
    And I update the selection of 'Conditions'                                   # features/support/step_definitions/experiment_steps/experiment_config.rb:11
    And I update the selection of 'Populations'                                  # features/support/step_definitions/experiment_steps/experiment_config.rb:11
    And I save the working illustration                                          # features/support/step_definitions/experiment_steps/experiment_config.rb:5
    Then I am sure that the selection of 'Channels' is posteriorly correct       # features/support/step_definitions/experiment_steps/experiment_config.rb:32
    And I am sure that the selection of 'Conditions' is posteriorly correct      # features/support/step_definitions/experiment_steps/experiment_config.rb:32
    And I am sure that the selection of 'Populations' is posteriorly correct     # features/support/step_definitions/experiment_steps/experiment_config.rb:32
    Given I select Layout Placeholders                                           # features/support/step_definitions/experiment_steps/experiment_config.rb:49
    When I move column 'p-Stat3-Ax488 - Panel 2' after 'p-Stat1-Ax647 - Panel 1' # features/support/step_definitions/experiment_steps/experiment_config.rb:53
    And I move row 'IL-4 + IFNg' below 'IL-4'                                    # features/support/step_definitions/experiment_steps/experiment_config.rb:67
    And I save the working illustration                                          # features/support/step_definitions/experiment_steps/experiment_config.rb:5
    Given I select Layout Placeholders                                           # features/support/step_definitions/experiment_steps/experiment_config.rb:49
    Then I am sure that the columns are correct                                  # features/support/step_definitions/experiment_steps/experiment_config.rb:81
    And I am sure that the rows are correct                                      # features/support/step_definitions/experiment_steps/experiment_config.rb:92
    Given I go to the working illustration                                       # features/support/step_definitions/experiment_steps.rb:3
    When I update the plot controls for the contour plots                        # features/support/step_definitions/experiment_steps/plots.rb:1
    And I open Plot Statistics                                                   # features/support/step_definitions/experiment_steps/plots.rb:5
    And I update the plot statistics for the contour plots                       # features/support/step_definitions/experiment_steps/plots.rb:9
    And I save the working illustration                                          # features/support/step_definitions/experiment_steps/experiment_config.rb:5
    Then I save the illustration as 'contour plots'                              # features/support/step_definitions/experiment_steps/plots.rb:30
    And I am sure the printed plots are correct for the contour plots            # features/support/step_definitions/experiment_steps/plots.rb:13
    Given I go to the working illustration                                       # features/support/step_definitions/experiment_steps.rb:3
    When I update the plot controls for the heatmaps                             # features/support/step_definitions/experiment_steps/plots.rb:1
    And I open Plot Statistics                                                   # features/support/step_definitions/experiment_steps/plots.rb:5
    And I update the plot statistics for the heatmaps                            # features/support/step_definitions/experiment_steps/plots.rb:9
    And I save the working illustration                                          # features/support/step_definitions/experiment_steps/experiment_config.rb:5
    Then I save the illustration as 'heatmaps'                                   # features/support/step_definitions/experiment_steps/plots.rb:30
    And I am sure the printed plots are correct for the heatmaps                 # features/support/step_definitions/experiment_steps/plots.rb:13
    Given I go to the working illustration                                       # features/support/step_definitions/experiment_steps.rb:3
    When I update the plot controls for the histogram overlays                   # features/support/step_definitions/experiment_steps/plots.rb:1
    And I open Plot Statistics                                                   # features/support/step_definitions/experiment_steps/plots.rb:5
    And I update the plot statistics for the histogram overlays                  # features/support/step_definitions/experiment_steps/plots.rb:9
    And I save the working illustration                                          # features/support/step_definitions/experiment_steps/experiment_config.rb:5
    Then I save the illustration as 'histogram overlays'                         # features/support/step_definitions/experiment_steps/plots.rb:30
    And I am sure the printed plots are correct for the histogram overlays       # features/support/step_definitions/experiment_steps/plots.rb:13
    Then I sign out                                                              # features/support/step_definitions/experiment_steps/logout.rb:1

Failing Scenarios:
cucumber features/cytobank/experiment.feature:5 # Scenario: Run The u937 Experiment

1 scenario (1 failed)
75 steps (1 failed, 43 skipped, 31 passed)
9m43.996s
